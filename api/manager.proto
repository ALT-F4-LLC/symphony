syntax = "proto3";

package api;

import "api/cluster.proto";
import "api/raft.proto";

service ManagerControl {
  rpc Init(ManagerControlInitRequest) returns (ManagerControlInitResponse) {}
  rpc Join(ManagerControlJoinRequest) returns (ManagerControlJoinResponse) {}
  rpc Remove(ManagerControlRemoveRequest)
      returns (ManagerControlRemoveResponse) {}
}

service ManagerRemote {
  rpc Join(ManagerRemoteJoinRequest) returns (ManagerRemoteJoinResponse) {}
}

message ManagerControlInitRequest {}
message ManagerControlInitResponse {}

message ManagerControlJoinRequest { string join_addr = 1; }
message ManagerControlJoinResponse {}

message ManagerRemoteJoinRequest {
  string addr = 1;
  Role role = 2;
}
message ManagerRemoteJoinResponse {
  string gossip_addr = 1;
  string gossip_id = 2;
  uint64 raft_id = 3;
  repeated RaftMember raft_members = 4;
}

message ManagerControlRemoveRequest { uint64 raft_id = 1; }
message ManagerControlRemoveResponse {}