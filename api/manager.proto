syntax = "proto3";

package api;

import "api/cluster.proto";
import "api/raft.proto";

service ManagerControl {
  rpc Init(ManagerControlInitRequest) returns (ManagerControlInitResponse) {}
  rpc Join(ManagerControlJoinRequest) returns (ManagerControlJoinResponse) {}
  rpc Members(ManagerControlMembersRequest)
      returns (ManagerControlMembersResponse) {}
  rpc Remove(ManagerControlRemoveRequest)
      returns (ManagerControlRemoveResponse) {}
}

service ManagerRemote {
  rpc Join(ManagerRemoteJoinRequest) returns (ManagerRemoteJoinResponse) {}
}

message ManagerControlInitRequest {}
message ManagerControlInitResponse {}

message ManagerControlJoinRequest { string join_addr = 1; }
message ManagerControlJoinResponse {}

message ManagerControlMembersRequest {}
message ManagerControlMembersResponse { repeated RaftMember raft = 1; }

message ManagerControlRemoveRequest { uint64 raft_id = 1; }
message ManagerControlRemoveResponse {}

message ManagerRemoteJoinRequest {
  string addr = 1;
  Role role = 2;
}
message ManagerRemoteJoinResponse {
  uint64 raft_id = 1;
  repeated RaftMember raft_members = 2;
}
